window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(a){window.germanized.admin.shipping_providers={params:{},$wrapper:"",init:function(){var e=germanized.admin.shipping_providers;e.params=wc_gzd_admin_shipping_providers_params,e.$wrapper=a(".wc-gzd-shipping-providers"),a(document).on("click",".wc-gzd-shipping-provider-delete",e.onRemoveProvider).on("change",".wc-gzd-shipping-providers input.wc-gzd-shipping-provider-activated-checkbox",this.onChangeProviderStatus),a(window).on("load",function(){a(document).on("updateMoveButtons","table.wc-gzd-shipping-providers",e.onChangeSort)}),a("table.wc-gzd-shipping-providers tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,helper:function(e,i){return i.children().each(function(){a(this).width(a(this).width())}),i.css("left","0"),i},start:function(e,i){i.item.css("background-color","#f6f6f6")},stop:function(e,i){i.item.removeAttr("style"),i.item.trigger("updateMoveButtons")}})},onChangeSort:function(){var e=a(this).find('input[name="provider_order[]"]').map(function(){return a(this).val()}).get(),i=germanized.admin.shipping_providers,e={action:"woocommerce_gzd_sort_shipping_provider",order:e,security:i.getParams().sort_shipping_provider_nonce};i.doAjax(e)},onChangeProviderStatus:function(){var e=germanized.admin.shipping_providers,i=a(this),r=e.getProviderName(i),n=i.parents("td").find(".woocommerce-gzd-input-toggle"),i={action:"woocommerce_gzd_edit_shipping_provider_status",enable:i.is(":checked")?"yes":"no",provider:r};window.onbeforeunload="",n.addClass("woocommerce-input-toggle--loading"),e.doAjax(i,e.onChangeProviderStatusSucess)},onChangeProviderStatusSucess:function(e){var i=germanized.admin.shipping_providers.$wrapper.find('tr[data-shipping-provider="'+e.provider+'"]').find(".woocommerce-gzd-input-toggle");i.removeClass("woocommerce-input-toggle--loading"),i.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),"yes"===e.activated?i.addClass("woocommerce-input-toggle--enabled"):i.addClass("woocommerce-input-toggle--disabled")},getProviderName:function(e){germanized.admin.shipping_providers;return e.data("shipping-provider")?e.data("shipping-provider"):0<e.parents("tr").length&&e.parents("tr").data("shipping-provider")},onRemoveProvider:function(){var e=germanized.admin.shipping_providers,i=e.getProviderName(a(this));return i&&window.confirm(e.getParams().i18n_remove_shipping_provider_notice)&&e.removeProvider(i),!1},removeProvider:function(e){var i=germanized.admin.shipping_providers,e={action:"woocommerce_gzd_remove_shipping_provider",provider:e,security:i.getParams().remove_shipping_provider_nonce};i.block(),i.doAjax(e,i.onRemoveProviderSuccess)},onRemoveProviderSuccess:function(e){e=germanized.admin.shipping_providers.$wrapper.find('tr[data-shipping-provider="'+e.provider+'"]');0<e.length&&e.remove()},block:function(){germanized.admin.shipping_providers.$wrapper.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){germanized.admin.shipping_providers.$wrapper.unblock()},doAjax:function(e,i,r){var n=germanized.admin.shipping_providers,o=n.params.ajax_url,d=n.$wrapper;i=i||n.onAjaxSuccess,r=r||n.onAjaxError,e.hasOwnProperty("security")||(e.security=n.params.edit_shipping_providers_nonce),a.ajax({type:"POST",url:o,data:e,success:function(e){(e.success?i:r).apply(d,[e]),n.unblock()},error:function(e){r.apply(d,[e])},dataType:"json"})},onAjaxError:function(e){},onAjaxSuccess:function(e){},getParams:function(){return germanized.admin.shipping_providers.params}},a(document).ready(function(){germanized.admin.shipping_providers.init()})}(jQuery);