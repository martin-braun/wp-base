window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(s){window.germanized.admin.shipments_table={params:{},init:function(){var n=germanized.admin.shipments_table;n.params=wc_gzd_admin_shipments_table_params,n.initEnhanced(),s(document).on("click","#doaction, #doaction2",n.onBulkSubmit).on("click",".wc-gzd-shipment-action-button-generate-label",n.onCreateLabel),s(document.body).on("init_tooltips",function(){n.initTipTip()}),n.initTipTip()},onCreateLabel:function(){germanized.admin.shipments_table;var n=s(this).parents("tr").find("th.check-column input").val();return s(this).parents("td").WCBackboneModal({template:"wc-gzd-modal-create-shipment-label-"+n}),!1},onBulkSubmit:function(){var n=germanized.admin.shipments_table,t=s(this).parents(".bulkactions").find("select[name^=action]").val(),e=s(this).parents("#posts-filter").find("input.shipment_type").val(),a=[];if(s("#posts-filter").find('input[name="shipment[]"]:checked').each(function(){a.push(s(this).val())}),n.params.bulk_actions.hasOwnProperty(t)&&0<a.length){var i=n.params.bulk_actions[t];return s(".bulk-action-wrapper").find(".bulk-title").text(i.title),s("#posts-filter").addClass("bulk-action-processing"),s("#posts-filter").find(".bulkactions button").prop("disabled",!0),n.handleBulkAction(t,1,a,e),!1}},handleBulkAction:function(t,n,e,a){var i=germanized.admin.shipments_table,o=i.params.bulk_actions[t];s.ajax({type:"POST",url:i.params.ajax_url,data:{action:"woocommerce_gzd_shipments_bulk_action_handle",bulk_action:t,step:n,type:a,ids:e,security:o.nonce},dataType:"json",success:function(n){n.success&&("done"===n.data.step?(s(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(n.data.percentage),window.location=n.data.url,setTimeout(function(){s("#posts-filter").removeClass("bulk-action-processing"),s("#posts-filter").find(".bulkactions button").prop("disabled",!1)},2e3)):(s(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(n.data.percentage),i.handleBulkAction(t,parseInt(n.data.step,10),n.data.ids,n.data.type)))}}).fail(function(n){window.console.log(n)})},initTipTip:function(){s(".column-actions .wc-gzd-shipment-action-button").tipTip({fadeIn:50,fadeOut:50,delay:200})},initEnhanced:function(){try{s(document.body).on("wc-enhanced-select-init",function(){s(":input.wc-gzd-order-search").filter(":not(.enhanced)").each(function(){var n={allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"1",escapeMarkup:function(n){return n},ajax:{url:wc_gzd_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(n){return{term:n.term,action:"woocommerce_gzd_json_search_orders",security:wc_gzd_admin_shipments_table_params.search_orders_nonce,exclude:s(this).data("exclude")}},processResults:function(n){var e=[];return n&&s.each(n,function(n,t){e.push({id:n,text:t})}),{results:e}},cache:!0}};s(this).selectWoo(n).addClass("enhanced")})}),s("html").on("click",function(n){this===n.target&&s(":input.wc-gzd-order-search").filter(".select2-hidden-accessible").selectWoo("close")})}catch(n){window.console.log(n)}}},s(document).ready(function(){germanized.admin.shipments_table.init()})}(jQuery);