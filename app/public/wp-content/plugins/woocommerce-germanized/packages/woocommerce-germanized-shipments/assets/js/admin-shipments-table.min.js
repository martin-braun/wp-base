window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(o){window.germanized.admin.shipments_table={params:{},init:function(){var e=germanized.admin.shipments_table;e.params=wc_gzd_admin_shipments_table_params,e.initEnhanced(),o(document).on("click","#doaction, #doaction2",e.onBulkSubmit).on("click",".wc-gzd-shipment-action-button-generate-label",e.onCreateLabel),o(document.body).on("init_tooltips",function(){e.initTipTip()}),e.initTipTip()},onCreateLabel:function(){germanized.admin.shipments_table;var e=o(this).parents("tr").find("th.check-column input").val();return o(this).parents("td").WCBackboneModal({template:"wc-gzd-modal-create-shipment-label-"+e}),!1},onBulkSubmit:function(){var e,t=germanized.admin.shipments_table,n=o(this).parents(".bulkactions").find("select[name^=action]").val(),a=o(this).parents("#posts-filter").find("input.shipment_type").val(),i=[];if(o("#posts-filter").find('input[name="shipment[]"]:checked').each(function(){i.push(o(this).val())}),t.params.bulk_actions.hasOwnProperty(n)&&0<i.length)return e=t.params.bulk_actions[n],o(".bulk-action-wrapper").find(".bulk-title").text(e.title),o("#posts-filter").addClass("bulk-action-processing"),o("#posts-filter").find(".bulkactions button").prop("disabled",!0),t.handleBulkAction(n,1,i,a),!1},handleBulkAction:function(t,e,n,a){var i=germanized.admin.shipments_table,s=i.params.bulk_actions[t];o.ajax({type:"POST",url:i.params.ajax_url,data:{action:"woocommerce_gzd_shipments_bulk_action_handle",bulk_action:t,step:e,type:a,ids:n,security:s.nonce},dataType:"json",success:function(e){e.success&&("done"===e.data.step?(o(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(e.data.percentage),window.location=e.data.url,setTimeout(function(){o("#posts-filter").removeClass("bulk-action-processing"),o("#posts-filter").find(".bulkactions button").prop("disabled",!1)},2e3)):(o(".bulk-action-wrapper").find(".woocommerce-shimpents-bulk-progress").val(e.data.percentage),i.handleBulkAction(t,parseInt(e.data.step,10),e.data.ids,e.data.type)))}}).fail(function(e){window.console.log(e)})},initTipTip:function(){o(".column-actions .wc-gzd-shipment-action-button").tipTip({fadeIn:50,fadeOut:50,delay:200})},initEnhanced:function(){try{o(document.body).on("wc-enhanced-select-init",function(){o(":input.wc-gzd-order-search").filter(":not(.enhanced)").each(function(){var e={allowClear:!!o(this).data("allow_clear"),placeholder:o(this).data("placeholder"),minimumInputLength:o(this).data("minimum_input_length")?o(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:wc_gzd_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"woocommerce_gzd_json_search_orders",security:wc_gzd_admin_shipments_table_params.search_orders_nonce,exclude:o(this).data("exclude")}},processResults:function(e){var n=[];return e&&o.each(e,function(e,t){n.push({id:e,text:t})}),{results:n}},cache:!0}};o(this).selectWoo(e).addClass("enhanced")}),o(":input.wc-gzd-shipping-provider-search").filter(":not(.enhanced)").each(function(){var e={allowClear:!!o(this).data("allow_clear"),placeholder:o(this).data("placeholder"),minimumInputLength:o(this).data("minimum_input_length")?o(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:wc_gzd_admin_shipments_table_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"woocommerce_gzd_json_search_shipping_provider",security:wc_gzd_admin_shipments_table_params.search_shipping_provider_nonce,exclude:o(this).data("exclude")}},processResults:function(e){var n=[];return e&&o.each(e,function(e,t){n.push({id:e,text:t})}),{results:n}},cache:!0}};o(this).selectWoo(e).addClass("enhanced")})}),o("html").on("click",function(e){this===e.target&&(o(":input.wc-gzd-order-search").filter(".select2-hidden-accessible").selectWoo("close"),o(":input.wc-gzd-shipping-provider-search").filter(".select2-hidden-accessible").selectWoo("close"))})}catch(e){window.console.log(e)}}},o(document).ready(function(){germanized.admin.shipments_table.init()})}(jQuery);